# =============================================================================
# 备份和清理服务配置
# =============================================================================
# 将这些配置添加到你的 .env 文件中，或者在生产环境中单独使用

# =============================================================================
# 备份服务配置
# =============================================================================

# 启用/禁用备份服务
BACKUP_ENABLED=true

# 备份调度 (cron 表达式)
# 默认: 每天凌晨 2:00 执行备份
BACKUP_SCHEDULE="0 2 * * *"

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# 备份存储路径
BACKUP_PATH=/opt/tempmail/backups

# 压缩级别 (1-9, 9为最高压缩)
BACKUP_COMPRESSION_LEVEL=6

# 备份通知邮箱
BACKUP_NOTIFICATION_EMAIL=admin@nnu.edu.kg

# 备份加密 (推荐生产环境启用)
BACKUP_ENCRYPTION_ENABLED=false
BACKUP_ENCRYPTION_KEY=

# =============================================================================
# 数据清理服务配置
# =============================================================================

# 启用/禁用清理服务
CLEANUP_ENABLED=true

# 清理调度配置
CLEANUP_EXPIRED_MAILBOXES_SCHEDULE="*/15 * * * *"  # 每15分钟清理过期邮箱
CLEANUP_OLD_MAILS_SCHEDULE="0 3 * * *"             # 每天凌晨3点清理旧邮件
CLEANUP_ORPHANED_DATA_SCHEDULE="0 4 * * 0"         # 每周日凌晨4点清理孤立数据
CLEANUP_REDIS_SCHEDULE="0 2 * * *"                 # 每天凌晨2点清理Redis

# 数据保留策略
EXPIRED_MAILBOX_GRACE_PERIOD=2      # 过期邮箱宽限期 (小时)
OLD_MAILS_RETENTION_DAYS=7          # 旧邮件保留天数
LOG_RETENTION_DAYS=30               # 日志保留天数
SESSION_RETENTION_HOURS=24          # 会话保留小时数

# 批处理大小
CLEANUP_BATCH_SIZE=100

# =============================================================================
# 监控服务配置
# =============================================================================

# 启用/禁用监控服务
MONITORING_ENABLED=true

# 监控检查间隔 (cron 表达式)
MONITORING_CHECK_INTERVAL="* * * * *"  # 每分钟检查一次

# 告警阈值配置
ALERT_CPU_THRESHOLD=80              # CPU使用率阈值 (%)
ALERT_MEMORY_THRESHOLD=85           # 内存使用率阈值 (%)
ALERT_DISK_THRESHOLD=90             # 磁盘使用率阈值 (%)
ALERT_RESPONSE_TIME_THRESHOLD=2000  # 响应时间阈值 (毫秒)
ALERT_ERROR_RATE_THRESHOLD=10       # 错误率阈值 (错误/分钟)

# 通知配置
ALERT_EMAIL=admin@nnu.edu.kg
SLACK_WEBHOOK_URL=
ALERT_WEBHOOK_URL=

# =============================================================================
# 数据库配置
# =============================================================================

# 容器名称 (用于 Docker 环境)
MONGODB_CONTAINER_NAME=tempmail-mongodb
REDIS_CONTAINER_NAME=tempmail-redis

# 数据目录
MONGODB_DATA_DIR=/data/db
REDIS_DATA_DIR=/data

# =============================================================================
# 日志配置
# =============================================================================

# 日志目录
LOGS_DIR=./logs
LOG_FILE=./logs/app.log

# =============================================================================
# 性能配置
# =============================================================================

# 监控历史数据保留 (分钟)
MONITORING_HISTORY_RETENTION=1440  # 24小时

# 备份并发数
BACKUP_CONCURRENCY=3

# 清理并发数
CLEANUP_CONCURRENCY=2

# =============================================================================
# 开发/测试配置
# =============================================================================

# 测试模式 (跳过某些检查)
TEST_MODE=false

# 调试模式 (更详细的日志)
DEBUG_MODE=false

# 模拟模式 (不执行实际操作)
DRY_RUN=false