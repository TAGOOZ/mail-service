# =============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# IMPORTANT: Replace all placeholder values with your actual production values
# Save this as .env.production on your production server

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
NODE_ENV=production

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
# Replace with your actual domain
PRODUCTION_DOMAIN=yourdomain.com
MAIL_DOMAIN=yourdomain.com
APP_DOMAIN=tempmail.yourdomain.com
API_DOMAIN=tempmail.yourdomain.com

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
BACKEND_PORT=3001
BACKEND_HOST=0.0.0.0
FRONTEND_PORT=3000
FRONTEND_HOST=0.0.0.0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Production MongoDB (use strong credentials!)
MONGODB_ROOT_USERNAME=admin
MONGODB_ROOT_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD_123!@#
MONGODB_DATABASE=tempmail_production
MONGODB_HOST=mongodb
MONGODB_PORT=27017

# Production Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_TO_STRONG_REDIS_PASSWORD

# =============================================================================
# MAIL SYSTEM CONFIGURATION - PRODUCTION
# =============================================================================
# Internal mail processing
MAIL_PORT=2525

# Postfix production configuration
POSTFIX_MYHOSTNAME=mail.yourdomain.com
POSTFIX_MYDOMAIN=yourdomain.com
POSTFIX_MYORIGIN=yourdomain.com
POSTFIX_SMTP_PORT=25
POSTFIX_SUBMISSION_PORT=587

# External SMTP (for sending notifications, etc.)
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

# Disable MailHog in production
MAILHOG_HOST=
MAILHOG_PORT=
MAILHOG_UI_PORT=

# =============================================================================
# SECURITY CONFIGURATION - PRODUCTION
# =============================================================================
# Generate strong secrets for production!
JWT_SECRET=CHANGE_THIS_TO_VERY_LONG_RANDOM_STRING_FOR_JWT_SIGNING_123456789
JWT_EXPIRES_IN=24h

SESSION_SECRET=CHANGE_THIS_TO_VERY_LONG_RANDOM_STRING_FOR_SESSIONS_987654321

# Strong password hashing
BCRYPT_ROUNDS=12

# =============================================================================
# CORS CONFIGURATION - PRODUCTION
# =============================================================================
CORS_ORIGIN=https://tempmail.yourdomain.com
CORS_ADDITIONAL_ORIGINS=https://yourdomain.com,https://api.tempmail.yourdomain.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin
CORS_EXPOSED_HEADERS=

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
# SSL certificate paths (Let's Encrypt)
SSL_CERT_PATH=/etc/letsencrypt/live/tempmail.yourdomain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/tempmail.yourdomain.com/privkey.pem

# =============================================================================
# LOGGING CONFIGURATION - PRODUCTION
# =============================================================================
LOG_LEVEL=WARN
LOG_FILE_PATH=/var/log/tempmail

# =============================================================================
# RATE LIMITING - PRODUCTION (Stricter)
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=50   # Reduced for production

# Mailbox generation limits
MAILBOX_RATE_LIMIT_WINDOW=3600000  # 1 hour
MAILBOX_RATE_LIMIT_MAX=10          # Max 10 mailboxes per hour per IP

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================
# Worker processes
WORKER_PROCESSES=2

# Connection pools
MONGODB_MAX_POOL_SIZE=20
REDIS_MAX_POOL_SIZE=10

# =============================================================================
# DOCKER CONFIGURATION - PRODUCTION
# =============================================================================
# Production container names
MONGODB_CONTAINER_NAME=tempmail-mongodb-prod
REDIS_CONTAINER_NAME=tempmail-redis-prod
BACKEND_CONTAINER_NAME=tempmail-backend-prod
FRONTEND_CONTAINER_NAME=tempmail-frontend-prod
MAILSERVER_CONTAINER_NAME=tempmail-mailserver-prod
NGINX_CONTAINER_NAME=tempmail-nginx-prod

# Production images
MONGODB_IMAGE=mongo:7.0
REDIS_IMAGE=redis:7.2-alpine
NGINX_IMAGE=nginx:1.25-alpine

# Health check configuration (production)
HEALTH_CHECK_INTERVAL=60s
HEALTH_CHECK_TIMEOUT=30s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60s

# Resource limits (production - adjust based on your server)
MONGODB_MEMORY_LIMIT=1G
MONGODB_CPU_LIMIT=1.0
REDIS_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.5
BACKEND_MEMORY_LIMIT=1G
BACKEND_CPU_LIMIT=1.0
FRONTEND_MEMORY_LIMIT=256M
FRONTEND_CPU_LIMIT=0.5
MAILSERVER_MEMORY_LIMIT=512M
MAILSERVER_CPU_LIMIT=0.5
NGINX_MEMORY_LIMIT=256M
NGINX_CPU_LIMIT=0.5

# =============================================================================
# FRONTEND CONFIGURATION - PRODUCTION
# =============================================================================
# Production API URLs
VITE_API_BASE_URL=https://tempmail.yourdomain.com/api
VITE_WS_URL=wss://tempmail.yourdomain.com

# App configuration
VITE_APP_TITLE=TempMail - Temporary Email Service
VITE_DOMAIN=yourdomain.com

# React app configuration (for compatibility)
REACT_APP_API_URL=https://tempmail.yourdomain.com/api
REACT_APP_WS_URL=wss://tempmail.yourdomain.com
REACT_APP_MAIL_DOMAIN=yourdomain.com

# =============================================================================
# MONITORING & ALERTS
# =============================================================================
# Email notifications for system alerts
ADMIN_EMAIL=admin@yourdomain.com
ALERT_EMAIL_SMTP_HOST=smtp.gmail.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USER=alerts@yourdomain.com
ALERT_EMAIL_PASS=APP_SPECIFIC_PASSWORD

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=tempmail-backups-yourdomain
BACKUP_S3_REGION=us-east-1

# =============================================================================
# EMAIL SECURITY
# =============================================================================
# SPF Record: "v=spf1 a mx ip4:YOUR_SERVER_IP ~all"
# DKIM: Configure after deployment
# DMARC: "v=DMARC1; p=quarantine; rua=mailto:admin@yourdomain.com"

# =============================================================================
# PRODUCTION NOTES
# =============================================================================
# 1. Replace ALL placeholder values with real production values
# 2. Use strong, unique passwords for all services
# 3. Set up proper DNS records (MX, A, SPF, DMARC)
# 4. Configure SSL certificates with Let's Encrypt
# 5. Test email delivery thoroughly before going live
# 6. Set up monitoring and alerts
# 7. Configure regular backups
# 8. Review security settings regularly
